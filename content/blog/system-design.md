---
title: システム設計の基礎をまとめる
createdAt: 2025-01-07
---

> [!note]
> この投稿ではシステム設計をソフトウェアアーキテクチャと同じ意味で使用します。

この投稿は、システム設計の基礎的な知識を自分の理解のためにまとめたものです。

## システム設計とは

**システム設計**とは、システムのアーキテクチャ特性を分析し、それに基づいてシステムの最適な構造を定義するプロセスのことをいいます。
さらに詳しく言えば、アーキテクチャ特性や構造の定義だけではなく、アーキテクチャ決定というルールや設計指針というガイドの策定も含みます。
また、システム設計はシステム開発からのフィードバックを得て繰り返し行うことが重要です。

システム設計の成果物は、**アーキテクチャ**や**設計**と呼ばれます。
どちらも同じ意味で使われることも多いですが、システム全体の構造をアーキテクチャ、より具体的で詳細なコードレベルの構造を設計と区別することもあります。
このような区別をする場合、システム設計のプロセスで定義するのは、設計ではなくアーキテクチャと言えます。
この投稿ではアーキテクチャと設計は区別はせず、システム全体の構造のことも設計と呼びます。

システム設計は**トレードオフが全て**だと言われています。
システム設計のすべての決定は、多くの相反する要素を考慮しなければならず、何も犠牲にしない決定は存在しません。
あらゆるシステムに最適な一つの設計は存在せず、システムの特性や要件によって最適な設計は変化していきます。
良い設計のためには、複数の選択肢を比較検討し、それぞれのメリットとデメリットを理解したうえで適切なバランスを見つけ出す必要があります。

### コンポーネント

システム設計で定義する構造の最小の構成要素はコードの集まりであり、**コンポーネント**と呼ばれます。
コンポーネントの種類としてはサブシステム・レイヤー・サービスなどがあり、入れ子構造になることもあります。
サブシステムやレイヤーは関連するコードの集まりのことで、サービスは独自のアドレスを持つ通信が可能なコンポーネントです。
この通信にはTCP/IPのような低レベルのプロトコルやHTTPなどのプロトコルが使用されます。

設計者はシステム設計のプロセスの中で、どのようなコードの集まりをコンポーネントとするかを識別して構成し、これが設計における主要な作業になります。
この作業は、あらかじめ決められたコンポーネントを組み合わせるというものではなく、システム全体の特性や要件に合わせて最適なコンポーネントを見つけ出すという作業に近いと言えます。

一番初めにコンポーネントを識別するためには、コンポーネントの**最上位分割**を行うとよいです。
最上位分割とは、システムの最上位のコンポーネントをどのように分割して子コンポーネントを構成していくかの方法のことで、以下のような方法があります。

- **技術による分割**: システムをプレゼンテーション、ビジネスロジック、データアクセスといった技術能力ごとに分割する
- **ドメインによる分割**: システムを顧客管理、商品管理、注文管理といったビジネス上の意味合いに基づいて分割する

最上位分割を行ってコンポーネントを構成するための指針を決めたあと、より具体的なコンポーネントを見つけていきます。
このアプローチには、ロールとアクションを明らかにする**アクター/アクションアプローチ**、ロールとイベントを明らかにする**イベントストーミング**、
ロールとワークフローを明らかにする**ワークフローアプローチ**などがあります。

コンポーネントを識別する際には、そのコンポーネントがシステムの特性や要件を満たせるかについても考慮する必要があります。
コンポーネントの設計をシステムの機能面のみから捉えてしまうと、システムの特性や要件を満たせない可能性があるため、
それらを意識しながら、さらににコンポーネントを分割・統合する必要があります。

初期に行うコンポーネントの識別が良い設計になっている可能性はあまり高くないため、コンポーネントをイテレーティブに改善していく必要があります。
そのため、システム設計はシステムの開発からのフィードバックも重要になってきます。

### アーキテクチャ特性と関連技術

設計に必要な**アーキテクチャ特性**とは、システムが満たすべき要件のうち、機能に関係しないものをいいます。
これは一般的には非機能要件や品質要件などと呼ばれるものです。

- 一貫性
- 可用性
- スケーラビリティ
- パフォーマンス

#### 一貫性

#### 可用性

##### フェイルオーバー

##### レプリケーション

フェイルオーバーを実現するために使うことができる。負荷の分散も。

#### スケーラビリティ

##### 水平・垂直スケーリング

##### ロードバランサ

##### シャーディング

#### パフォーマンス

##### キャッシュ

##### 非同期処理

##### CDN

## アーキテクチャスタイル

## さいごに

## 参考資料

- [ソフトウェアアーキテクチャの基礎](https://www.oreilly.co.jp//books/9784873119823/)
- [The System Design Primer](https://github.com/donnemartin/system-design-primer/blob/master/README-ja.md)
- [System Design](https://www.karanpratapsingh.com/courses/system-design)
